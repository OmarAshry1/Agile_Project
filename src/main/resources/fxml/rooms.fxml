<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="edu.facilities.ui.RoomsController"
            prefHeight="700.0" prefWidth="1200.0"
            stylesheets="@../css/style.css">

    <VBox spacing="0" AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
          AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" styleClass="content-area">

        <!-- Top Bar -->
        <HBox styleClass="top-bar" spacing="16" alignment="CENTER_LEFT">
            <VBox spacing="4" HBox.hgrow="ALWAYS">
                <Label text="Room Management" styleClass="top-bar-title"/>
                <Label text="View and manage all classroom and laboratory spaces" styleClass="top-bar-subtitle"/>
            </VBox>
            <HBox spacing="12" alignment="CENTER_RIGHT">
                <Button fx:id="backButton" text="Back" styleClass="btn-secondary"
                        onAction="#handleBack" prefWidth="100"/>
                <Button fx:id="addButton" text="Add Room" styleClass="btn-primary"
                        onAction="#handleAddRoom" prefWidth="120"/>
                <Button fx:id="editButton" text="Edit" styleClass="btn-primary"
                        onAction="#handleEditRoom" prefWidth="100"/>
                <Button fx:id="deleteButton" text="Delete" styleClass="btn-danger"
                        onAction="#handleDeleteRoom" prefWidth="100"/>
            </HBox>
        </HBox>

        <!-- Main Content -->
        <VBox spacing="24" styleClass="padding-lg">

            <!-- Search and Filter Section -->
            <VBox styleClass="card" spacing="16">
                <Label text="Search & Filter" styleClass="section-header"/>
                <HBox spacing="16" alignment="CENTER_LEFT">
                    <VBox spacing="8" HBox.hgrow="ALWAYS">
                        <Label text="Search Rooms" styleClass="form-label"/>
                        <TextField fx:id="searchField" promptText="Search by room number, type, or building..."
                                   styleClass="search-field" prefHeight="40" onKeyReleased="#handleSearch"/>
                    </VBox>
                    <VBox spacing="8">
                        <Label text="Filter by Type" styleClass="form-label"/>
                        <ComboBox fx:id="typeFilter" promptText="All Types" prefWidth="180" prefHeight="40"
                                  onAction="#handleFilterType"/>
                    </VBox>
                    <VBox spacing="8">
                        <Label text="Filter by Status" styleClass="form-label"/>
                        <ComboBox fx:id="statusFilter" promptText="All Status" prefWidth="180" prefHeight="40"
                                  onAction="#handleFilterStatus"/>
                    </VBox>
                </HBox>
                <HBox spacing="16" alignment="CENTER_LEFT">
                    <VBox spacing="8">
                        <Label text="Min Capacity" styleClass="form-label"/>
                        <ComboBox fx:id="capacityFilter" promptText="Any Capacity" prefWidth="180" prefHeight="40"
                                  onAction="#handleFilterCapacity"/>
                    </VBox>
                    <VBox spacing="8" HBox.hgrow="ALWAYS">
                        <Label text="Filter by Equipment" styleClass="form-label"/>
                        <TextField fx:id="equipmentFilter" promptText="e.g., Projector, Whiteboard..."
                                   prefHeight="40" onKeyReleased="#handleFilterEquipment"/>
                    </VBox>
                </HBox>
            </VBox>

            <!-- Table Section -->
            <VBox VBox.vgrow="ALWAYS" spacing="12">
                <Label text="All Rooms" styleClass="section-header"/>

                <TableView fx:id="roomsTable" VBox.vgrow="ALWAYS" styleClass="table-view">
                    <columns>
                        <!-- Room Number Column -->
                        <TableColumn fx:id="roomNumberColumn" text="Room Number" prefWidth="150"
                                     sortable="true"/>

                        <!-- Type Column -->
                        <TableColumn fx:id="typeColumn" text="Type" prefWidth="180"
                                     sortable="true"/>

                        <!-- Capacity Column -->
                        <TableColumn fx:id="capacityColumn" text="Capacity" prefWidth="120"
                                     sortable="true"/>

                        <!-- Building Column -->
                        <TableColumn fx:id="buildingColumn" text="Building" prefWidth="200"
                                     sortable="true"/>

                        <!-- Floor Column -->
                        <TableColumn fx:id="floorColumn" text="Floor" prefWidth="100"
                                     sortable="true"/>

                        <!-- Equipment Column -->
                        <TableColumn fx:id="equipmentColumn" text="Equipment" prefWidth="250"
                                     sortable="false"/>

                        <!-- Status Column -->
                        <TableColumn fx:id="statusColumn" text="Status" prefWidth="150"
                                     sortable="true"/>
                    </columns>

                    <!-- Empty Table Placeholder -->
                    <placeholder>
                        <VBox alignment="CENTER" spacing="12" styleClass="padding-xl">
                            <Label text="No Rooms Available" styleClass="section-header" style="-fx-text-fill: #64748B;"/>
                            <Label text="Click 'Add Room' to create your first room" styleClass="text-muted"/>
                        </VBox>
                    </placeholder>
                </TableView>
            </VBox>

            <!-- Footer Stats -->
            <HBox spacing="32" alignment="CENTER_LEFT" styleClass="card">
                <VBox spacing="8">
                    <Label text="Total Rooms" styleClass="form-label"/>
                    <Label fx:id="totalRoomsLabel" text="0" styleClass="section-header"/>
                </VBox>

                <Separator orientation="VERTICAL" prefHeight="50"/>

                <VBox spacing="8">
                    <Label text="Available" styleClass="form-label"/>
                    <Label fx:id="availableRoomsLabel" text="0" styleClass="section-header"
                           style="-fx-text-fill: #10B981;"/>
                </VBox>

                <Separator orientation="VERTICAL" prefHeight="50"/>

                <VBox spacing="8">
                    <Label text="Booked" styleClass="form-label"/>
                    <Label fx:id="bookedRoomsLabel" text="0" styleClass="section-header"
                           style="-fx-text-fill: #F59E0B;"/>
                </VBox>

                <Separator orientation="VERTICAL" prefHeight="50"/>

                <VBox spacing="8">
                    <Label text="Under Maintenance" styleClass="form-label"/>
                    <Label fx:id="maintenanceRoomsLabel" text="0" styleClass="section-header"
                           style="-fx-text-fill: #EF4444;"/>
                </VBox>
            </HBox>

        </VBox>

    </VBox>

</AnchorPane>
